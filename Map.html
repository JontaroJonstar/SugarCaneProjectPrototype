<!DOCTYPE html>
<html>

<head>
    <title>My Project</title>
    <link rel="stylesheet" href="style.css">
</head>

    <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="Map.html">Map</a></li>
        <li><a href="Gauge.html">Gauge</a></li>
        <li><a href="Gauge2.html">Gauge2</a></li>
        <li><a href="test_1.html">test_1</a></li>
        <li><a href="test_2.html">test_2</a></li>
    </ul>


    <body>
        <h1>Map</h1>
        <img src="test_1.jpg">

        <script>
            var a = [];
            setInterval(getData, 1000) // run get Data function every 1 second
            //getData();

            
            async function getData(){
                const response = await fetch('data.csv');
                const data = await response.text();
                //console.log(data);

                const rows = data.split('\n').slice(1);
                rows.forEach(elt => {
                    const row = elt.split(',');
                    const number = row[3];

                    a.push(number);
                //   console.log(a);   

                ///   console.log(row);
                    //console.log(number);
                ///  setGaugeValue(gaugeElement, number);
                });
            // console.log("this is number", a); // the var a must within the getDATA FUCNITON 
                var lastItem = a[a.length -2]; //choose the last number to display
                console.log("this is last item", lastItem);
                setGaugeValue(gaugeElement, lastItem); // run setGauge when eachtime get the data.
            //    setTimeout (setGaugeValue(gaugeElement, lastItem), 3000);
                /// console.log(rows);
            };

        </script>


    </body>
</html>